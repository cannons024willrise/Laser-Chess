<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Login to Laser Chess Nexus</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <style>
      @font-face {
        font-family: customfont;
        src: url(c.otf);
      }

      html { height: 100%; }
      body {
        margin: 0;
        padding: 0;
        font-family: customfont;
        
  background-image: url("Gemini_Generated_Image_tjcevutjcevutjce.png");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
      }

      .login-box {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 700px;
        padding: 40px;
        transform: translate(-50%, -50%);
        background: rgba(0,0,0,.5);
        box-sizing: border-box;
        box-shadow: 0 15px 25px rgba(0,0,0,.6);
        border-radius: 10px;
      }

      .login-box h2 {
        margin: 0 0 30px;
        padding: 0;
        color: #fff;
        text-align: center;
      }

      .login-box .user-box { position: relative; }

      .login-box .user-box input {
        width: 100%;
        padding: 10px 0;
        font-size: 16px;
        color: #fff;
        margin-bottom: 30px;
        border: none;
        border-bottom: 1px solid #fff;
        outline: none;
        background: transparent;
      }

      .login-box .user-box label {
        position: absolute;
        top: 0;
        left: 0;
        padding: 10px 0;
        font-size: 16px;
        color: #fff;
        pointer-events: none;
        transition: .5s;
      }

      .login-box .user-box input:focus ~ label,
      .login-box .user-box input:valid ~ label {
        top: -20px;
        left: 0;
        color: #03e9f4;
        font-size: 12px;
      }

      .login-box form a {
        position: relative;
        display: inline-block;
        padding: 10px 20px;
        color: #03e9f4;
        font-size: 16px;
        text-decoration: none;
        text-transform: uppercase;
        overflow: hidden;
        transition: .5s;
        margin-top: 40px;
        letter-spacing: 4px;
      }

      .login-box a:hover {
        background: #03e9f4;
        color: #fff;
        border-radius: 5px;
        box-shadow: 0 0 5px #03e9f4,
                    0 0 25px #03e9f4,
                    0 0 50px #03e9f4,
                    0 0 100px #03e9f4;
      }

      .login-box a span { position: absolute; display: block; }

      .login-box a span:nth-child(1) {
        top: 0;
        left: -100%;
        width: 100%;
        height: 2px;
        background: linear-gradient(90deg, transparent, #03e9f4);
        animation: btn-anim1 1s linear infinite;
      }
      @keyframes btn-anim1 { 0% { left: -100%; } 50%,100% { left: 100%; } }

      .login-box a span:nth-child(2) {
        top: -100%;
        right: 0;
        width: 2px;
        height: 100%;
        background: linear-gradient(180deg, transparent, #03e9f4);
        animation: btn-anim2 1s linear infinite;
        animation-delay: .25s;
      }
      @keyframes btn-anim2 { 0% { top: -100%; } 50%,100% { top: 100%; } }

      .login-box a span:nth-child(3) {
        bottom: 0;
        right: -100%;
        width: 100%;
        height: 2px;
        background: linear-gradient(270deg, transparent, #03e9f4);
        animation: btn-anim3 1s linear infinite;
        animation-delay: .5s;
      }
      @keyframes btn-anim3 { 0% { right: -100%; } 50%,100% { right: 100%; } }

      .login-box a span:nth-child(4) {
        bottom: -100%;
        left: 0;
        width: 2px;
        height: 100%;
        background: linear-gradient(360deg, transparent, #03e9f4);
        animation: btn-anim4 1s linear infinite;
        animation-delay: .75s;
      }
      @keyframes btn-anim4 { 0% { bottom: -100%; } 50%,100% { bottom: 100%; } }

      /* Columns & layout */
      .columns {
        display: flex;
        gap: 28px;
        align-items: flex-start;
      }

      /* LEFT: form */
      #login-form {
        flex: 1 1 50%;
        display: flex;
        flex-direction: column;
      }

      /* Button row (Sign Up / Sign In side-by-side) */
      .button-row {
        display: flex;
        gap: 12px;
        margin-top: 6px;
        align-items: center;
        justify-content: center;
      }

      .button-row a {
        flex: 1 1 50%;
        display: inline-block;
        margin-top: 0;
        text-align: center;
      }

      #googleLogin, #passwordResetBtn {
        display: block;
        margin-top: 14px;
        text-align: center;
      }

      /* RIGHT: text */
      .login-text {
        flex: 1 1 50%;
      }

      .login-text p {
        color: #fff;
        margin: 0;
        line-height: 1.45;
        font-size: 20px;
      }

      /* Status / Error area (full-width, outside columns) */
      .status-msg, .error-msg {
        width: 100%;
        text-align: center;
        margin-top: 14px;
        word-wrap: break-word;
        white-space: pre-wrap;
        max-width: 100%;
      }
      .status-msg { color: #fff; }
      .error-msg { color: #ff6b6b; }

      .status-msg, .error-msg {
        max-height: 160px;
        overflow: auto;
        padding: 6px 8px;
        box-sizing: border-box;
      }

      /* Responsive */
      @media (max-width: 720px) {
        .login-box { width: 90vw; padding: 24px; }
        .columns { flex-direction: column; gap: 18px; }
        #login-form, .login-text { flex: 1 1 100%; }
        .button-row { flex-direction: column; gap: 10px; }
        .button-row a { flex: unset; }
        .login-text p { font-size: 13px; }
      }
    </style>




















    
    <script>
      window.onTurnstileSuccess = function(token) {
        console.log("âœ… Turnstile success:", token);
        window.turnstileToken = token;
      };
    </script>

    <script type="module">

      // Firebase imports & config (kept intact)
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
      import {
        getAuth,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
        GoogleAuthProvider,
        signInWithPopup,
        signOut,
        sendEmailVerification,
        sendPasswordResetEmail,
        setPersistence,
        browserLocalPersistence
      } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

      const firebaseConfig = {
        apiKey: "AIzaSyCVHWRoVyuDnKRPY4EQbmyeY_rRR56XpEg",
        authDomain: "laserchessnexus-lobby-db-auth.firebaseapp.com",
        projectId: "laserchessnexus-lobby-db-auth",
        storageBucket: "laserchessnexus-lobby-db-auth.firebasestorage.app",
        messagingSenderId: "1054469827964",
        appId: "1:1054469827964:web:0fe70a1fddb5b5d27588f9",
        measurementId: "G-F0PHDZYB4M"
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const provider = new GoogleAuthProvider();

      (async () => {
        try {
          await setPersistence(auth, browserLocalPersistence);
          console.log("Auth persistence set to LOCAL.");
        } catch (e) {
          console.warn("Could not set auth persistence:", e);
        }
      })();

      // DOM refs (these IDs are preserved exactly)
      const statusEl = document.getElementById("status");
      const signUpBtn = document.getElementById("signUpBtn");
      const signInBtn = document.getElementById("signInBtn");
      const googleLoginBtn = document.getElementById("googleLogin");
      const signOutBtn = document.getElementById("signOut");
      const passwordResetBtn = document.getElementById("passwordResetBtn");
      const errorMsgEl = document.getElementById("error-msg");

      // Sign Up
      signUpBtn.addEventListener("click", async () => {
        const email = document.getElementById("entry-email").value;
        const password = document.getElementById("entry-password").value;
        try {
          const userCredential = await createUserWithEmailAndPassword(auth, email, password);
          await sendEmailVerification(userCredential.user);
          statusEl.textContent = "Signed up as " + userCredential.user.email + ". Check your email for verification!";
          errorMsgEl.textContent = "";
          window.location.href = "https://laserchess.pages.dev/home/home";
          alert("A verification email has been sent. Please verify your email.");
        } catch (error) {
          console.error("Error signing up:", error);
          errorMsgEl.textContent = "Sign-up failed: " + error.message;
        }
      });

      // Sign In
      signInBtn.addEventListener("click", async () => {
        const email = document.getElementById("entry-email").value;
        const password = document.getElementById("entry-password").value;
        try {
          const userCredential = await signInWithEmailAndPassword(auth, email, password);
          if (userCredential.user.emailVerified) {
            statusEl.textContent = "Signed in as " + userCredential.user.email;
            errorMsgEl.textContent = "";
            window.location.href = "https://laserchess.pages.dev/home/home";
          } else {
            alert("Please verify your email before signing in.");
          }
        } catch (error) {
          console.error("Error signing in:", error);
          errorMsgEl.textContent = "Sign-in failed: " + error.message;
        }
      });

      // Google Sign-In
      googleLoginBtn.addEventListener("click", async () => {
        try {
          const result = await signInWithPopup(auth, provider);
          statusEl.textContent = "Signed in as " + result.user.displayName;
          errorMsgEl.textContent = "";
          window.location.href = "https://laserchess.pages.dev/home/home";
        } catch (error) {
          errorMsgEl.textContent = "Google sign-in failed: " + error.message;
        }
      });

      // Password Reset
      passwordResetBtn.addEventListener("click", async () => {
        const email = document.getElementById("entry-email").value;
        try {
          await sendPasswordResetEmail(auth, email);
          alert("Password reset email sent. Please check your inbox.");
          errorMsgEl.textContent = "";
          statusEl.textContent = "Password reset email sent to " + email;
        } catch (error) {
          console.error("Error sending password reset email:", error);
          errorMsgEl.textContent = "Failed to send password reset email: " + error.message;
        }
      });

    </script>
  </head>

  <body>
    <div class="login-box">
      <h2>Login to Laser Chess</h2>

      <div class="columns">
        <!-- LEFT: form -->
        <form id="login-form">
          <div class="user-box">
            <input id="entry-email" type="email" required />
            <label>Email</label>
          </div>

          <div class="user-box">
            <input id="entry-password" type="password" required />
            <label>Password</label>
          </div>

          <!-- Sign Up / Sign In side-by-side -->
          <div class="button-row">
            <a id="signUpBtn">
              <span></span><span></span><span></span><span></span>
              Sign Up
            </a>

            <a id="signInBtn">
              <span></span><span></span><span></span><span></span>
              Sign In
            </a>
          </div>

          <a id="googleLogin">
            <span></span><span></span><span></span><span></span>
            Sign in with Google
          </a>

          <a id="passwordResetBtn">
            <span></span><span></span><span></span><span></span>
            Forgot Password?
          </a>

          <div class="cf-turnstile" data-sitekey="0x4AAAAAABdKR0oWMX67xVHO" data-callback="onTurnstileSuccess"></div>
        </form>

        <!-- RIGHT: description text -->
        <div class="login-text">
          <p>
            A small site for playing online multiplayer Laser Chess.<br><br>
            Right in your browser, no install required!<br><br>
            Play today!<br><br>
            (Under development)
          </p>
        </div>
      </div>

      <!-- STATUS & ERROR: full-width, outside the columns (fixes layout break) -->
      <div id="status" class="status-msg"></div>
      <div id="error-msg" class="error-msg"></div>
    </div>
  </body>
</html>


